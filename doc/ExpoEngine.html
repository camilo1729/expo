<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ExpoEngine
  
    &mdash; Documentation by YARD 0.8.2.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">ExpoEngine</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
    <a class="full_list_link" id="tag_list_link"
        href="tag_list.html">
      Tag List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: ExpoEngine
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Grid5000::Campaign::Engine</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Grid5000::Campaign::Engine</li>
          
            <li class="next">ExpoEngine</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Expo.html" title="Expo (module)">Expo</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/g5k_api.rb</dd>
  
</dl>
<div class="clear"></div>





  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#environment-instance_method" title="#environment (instance method)">- (Object) <strong>environment</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute environment.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#resources-instance_method" title="#resources (instance method)">- (Object) <strong>resources</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute resources.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#site-instance_method" title="#site (instance method)">- (Object) <strong>site</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute site.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#walltime-instance_method" title="#walltime (instance method)">- (Object) <strong>walltime</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute walltime.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#defaults-instance_method" title="#defaults (instance method)">- (Object) <strong>defaults</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ExpoEngine) <strong>initialize</strong>(connection) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>I’m rewriting this method otherwise I cannot load the Class again because
the defaults get frozen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run%21-instance_method" title="#run! (instance method)">- (Object) <strong>run!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>rewriting the run code because the default behavior deploys an evironment 
and Expo does not like that, and also to finally construct the resource
set.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop%21-instance_method" title="#stop! (instance method)">- (Object) <strong>stop!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Redefining cleanup.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Expo.html" title="Expo (module)">Expo</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Expo.html#atask-instance_method" title="Expo#atask (method)">#atask</a></span>, <span class='object_link'><a href="Expo.html#check-instance_method" title="Expo#check (method)">#check</a></span>, <span class='object_link'><a href="Expo.html#convert_to_resource-instance_method" title="Expo#convert_to_resource (method)">#convert_to_resource</a></span>, <span class='object_link'><a href="Expo.html#extract_resources_new-instance_method" title="Expo#extract_resources_new (method)">#extract_resources_new</a></span>, <span class='object_link'><a href="Expo.html#g5k_init-instance_method" title="Expo#g5k_init (method)">#g5k_init</a></span>, <span class='object_link'><a href="Expo.html#g5k_reserve-instance_method" title="Expo#g5k_reserve (method)">#g5k_reserve</a></span>, <span class='object_link'><a href="Expo.html#g5k_run-instance_method" title="Expo#g5k_run (method)">#g5k_run</a></span>, <span class='object_link'><a href="Expo.html#get-instance_method" title="Expo#get (method)">#get</a></span>, <span class='object_link'><a href="Expo.html#get_machines-class_method" title="Expo.get_machines (method)">get_machines</a></span>, <span class='object_link'><a href="Expo.html#get_results-instance_method" title="Expo#get_results (method)">#get_results</a></span>, <span class='object_link'><a href="Expo.html#log_file_mgt-instance_method" title="Expo#log_file_mgt (method)">#log_file_mgt</a></span>, <span class='object_link'><a href="Expo.html#log_task-instance_method" title="Expo#log_task (method)">#log_task</a></span>, <span class='object_link'><a href="Expo.html#make_taktuk_result-instance_method" title="Expo#make_taktuk_result (method)">#make_taktuk_result</a></span>, <span class='object_link'><a href="Expo.html#make_task_result-instance_method" title="Expo#make_task_result (method)">#make_task_result</a></span>, <span class='object_link'><a href="Expo.html#parallel_section-instance_method" title="Expo#parallel_section (method)">#parallel_section</a></span>, <span class='object_link'><a href="Expo.html#print_taktuk_result-instance_method" title="Expo#print_taktuk_result (method)">#print_taktuk_result</a></span>, <span class='object_link'><a href="Expo.html#ptask-instance_method" title="Expo#ptask (method)">#ptask</a></span>, <span class='object_link'><a href="Expo.html#put-instance_method" title="Expo#put (method)">#put</a></span>, <span class='object_link'><a href="Expo.html#simpletask-instance_method" title="Expo#simpletask (method)">#simpletask</a></span>, <span class='object_link'><a href="Expo.html#task-instance_method" title="Expo#task (method)">#task</a></span>, <span class='object_link'><a href="Expo.html#treat_task-instance_method" title="Expo#treat_task (method)">#treat_task</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ExpoEngine (class)">ExpoEngine</a></span></tt>) <strong>initialize</strong>(connection) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>I’m rewriting this method otherwise I cannot load the Class again because
the defaults get frozen.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 35</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_connection identifier id'>connection</span><span class='rparen token'>)</span>
  <span class='rubyid_@site ivar id'>@site</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='string val'>&quot;grenoble&quot;</span><span class='rbrack token'>]</span>
  <span class='rubyid_@resources ivar id'>@resources</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='string val'>&quot;nodes=1&quot;</span><span class='rbrack token'>]</span>
  <span class='rubyid_@walltime ivar id'>@walltime</span><span class='assign token'>=</span><span class='integer val'>3600</span>
  <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='string val'>&quot;Expo_Experiment&quot;</span>
  <span class='rubyid_@connection ivar id'>@connection</span> <span class='assign token'>=</span> <span class='rubyid_connection identifier id'>connection</span>
  <span class='rubyid_@mutex ivar id'>@mutex</span> <span class='assign token'>=</span> <span class='rubyid_Mutex constant id'>Mutex</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
  <span class='rubyid_@resources_expo ivar id'>@resources_expo</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_@res ivar id'>@res</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="environment=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="environment-instance_method">
  
    - (<tt>Object</tt>) <strong>environment</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute environment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 23</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_environment identifier id'>environment</span>
  <span class='rubyid_@environment ivar id'>@environment</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 23</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span>
  <span class='rubyid_@name ivar id'>@name</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="resources=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="resources-instance_method">
  
    - (<tt>Object</tt>) <strong>resources</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute resources</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 23</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_resources identifier id'>resources</span>
  <span class='rubyid_@resources ivar id'>@resources</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="site=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="site-instance_method">
  
    - (<tt>Object</tt>) <strong>site</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute site</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 23</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_site identifier id'>site</span>
  <span class='rubyid_@site ivar id'>@site</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="walltime=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="walltime-instance_method">
  
    - (<tt>Object</tt>) <strong>walltime</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute walltime</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 23</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_walltime identifier id'>walltime</span>
  <span class='rubyid_@walltime ivar id'>@walltime</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="defaults-instance_method">
  
    - (<tt>Object</tt>) <strong>defaults</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 161</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_defaults identifier id'>defaults</span>  
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span><span class='symbol val'>:site</span><span class='comma token'>,</span><span class='symbol val'>:walltime</span><span class='comma token'>,</span><span class='symbol val'>:environment</span><span class='comma token'>,</span><span class='symbol val'>:resources</span><span class='comma token'>,</span><span class='symbol val'>:types</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_k identifier id'>k</span><span class='rbrace token'>}</span>    
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run!-instance_method">
  
    - (<tt>Object</tt>) <strong>run!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>rewriting the run code because the default behavior deploys an evironment 
and Expo does not like that, and also to finally construct the resource
set.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 100</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_run! fid id'>run!</span>
  <span class='rubyid_reset! fid id'>reset!</span>
  
  <span class='rubyid_env identifier id'>env</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='rubyid_dup identifier id'>dup</span>
  <span class='comment val'>### copying some variables defined by the user</span>
  <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:environment</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='rubyid_@environment ivar id'>@environment</span>    
  <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:site</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='rubyid_@site ivar id'>@site</span>
  <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:walltime</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='rubyid_@walltime ivar id'>@walltime</span>
  <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:resources</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='rubyid_@resources ivar id'>@resources</span>
  <span class='rubyid_nodes identifier id'>nodes</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='comment val'>## I will comment this lines because I'm working in interactive mode I dont want that my session</span>
  <span class='comment val'>## will be canceld because of Ctrl+C.</span>
  <span class='comment val'>#%w{ INT TERM}.each do |signal|</span>
  <span class='comment val'>#  Signal.trap( signal ) do</span>
  <span class='comment val'>#    logger.fatal &quot;Received #{signal.inspect} signal. Exiting...&quot;</span>
  <span class='comment val'>#        exit(1)</span>
  <span class='comment val'>#      end</span>
  <span class='comment val'>#end</span>
  
  <span class='comment val'>#logger.debug self.inspect</span>
  <span class='comment val'>#logger.info self</span>

  <span class='rubyid_change_dir identifier id'>change_dir</span> <span class='rubyid_do do kw'>do</span>
<span class='comment val'># I separate the deployment part from the submission part.</span>
 
    <span class='rubyid_env identifier id'>env</span> <span class='assign token'>=</span> <span class='rubyid_execute_with_hooks identifier id'>execute_with_hooks</span><span class='lparen token'>(</span><span class='symbol val'>:reserve!</span><span class='comma token'>,</span><span class='rubyid_env identifier id'>env</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_env identifier id'>env</span><span class='bitor op'>|</span>
      <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:nodes</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:job</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>'assigned_nodes'</span><span class='rbrack token'>]</span>
      <span class='rubyid_synchronize identifier id'>synchronize</span><span class='lbrace token'>{</span>
        <span class='rubyid_nodes identifier id'>nodes</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:ndoes</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_flatten! fid id'>flatten!</span>
      <span class='rbrace token'>}</span>
    <span class='rubyid_end end kw'>end</span> <span class='comment val'># reserve!</span>

    <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:environment</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
        <span class='rubyid_env identifier id'>env</span> <span class='assign token'>=</span> <span class='rubyid_execute_with_hooks identifier id'>execute_with_hooks</span><span class='lparen token'>(</span><span class='symbol val'>:deploy!</span><span class='comma token'>,</span> <span class='rubyid_env identifier id'>env</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_env identifier id'>env</span><span class='bitor op'>|</span>
          <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:nodes</span><span class='rbrack token'>]</span><span class='assign token'>=</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:deployment</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>'result'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_reject identifier id'>reject</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
            <span class='rubyid_v identifier id'>v</span><span class='lbrack token'>[</span><span class='string val'>'state'</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='string val'>'OK'</span>
          <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_keys identifier id'>keys</span><span class='dot token'>.</span><span class='rubyid_sort identifier id'>sort</span>
        <span class='rubyid_end end kw'>end</span> <span class='comment val'># :deploy!</span>
    <span class='rubyid_end end kw'>end</span>
    
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_defined? defined kw'>defined?</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='symbol val'>:job</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>'resources_by_type'</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>'vlans'</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
       <span class='comment val'># I have to redifined the resource Set.</span>
        <span class='rubyid_$all gvar id'>$all</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_node identifier id'>node</span><span class='bitor op'>|</span>
        <span class='rubyid_node identifier id'>node</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> 
        <span class='dstring node'>&quot;#{node.name.split('.')[0]}-kavlan-#{env[:job]['resources_by_type']['vlans'][0]}.#{node.properties[:site]}.grid5000.fr&quot;</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
                
  <span class='rubyid_end end kw'>end</span> <span class='comment val'>#change_dir</span>
  <span class='comment val'>#nodes</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_env identifier id'>env</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop!-instance_method">
  
    - (<tt>Object</tt>) <strong>stop!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Redefining cleanup</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/g5k_api.rb', line 155</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stop! fid id'>stop!</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_cleanup! fid id'>cleanup!</span><span class='lparen token'>(</span><span class='string val'>&quot;finishing&quot;</span><span class='rparen token'>)</span>
  <span class='comment val'>## cleaning up the variable $all</span>
  <span class='rubyid_$all gvar id'>$all</span><span class='assign token'>=</span><span class='rubyid_ResourceSet constant id'>ResourceSet</span><span class='colon2 op'>::</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Nov 19 13:00:40 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.2.1 (ruby-1.8.7).
</div>

  </body>
</html>